<div class="task-detail-container">
  <!-- Service Unavailable -->
  <app-service-unavailable 
    *ngIf="serviceUnavailable && !isLoading"
    [message]="errorMessage"
    (retry)="loadTask(task?.id || '')"
  ></app-service-unavailable>

  <div class="loading" *ngIf="isLoading">
    <p>Carregando tarefa...</p>
  </div>

  <div class="detail-content" *ngIf="task && !isLoading && !serviceUnavailable">
    <div class="header">
      <div class="header-content">
        <h1>{{ task.title }}</h1>
        <div class="header-actions">
          <button class="btn-edit" [routerLink]="['/tasks/edit', task.id]">
            âœï¸ Editar
          </button>
          <button class="btn-delete" (click)="deleteTask()">
            ğŸ—‘ï¸ Excluir
          </button>
          <button class="btn-back" routerLink="/tasks">
            â† Voltar
          </button>
        </div>
      </div>
    </div>

    <div class="detail-card">
      <!-- Status e Prioridade -->
      <div class="badges-section">
        <div class="badge-item">
          <span class="badge-label">Status:</span>
          <span class="badge" [ngClass]="getStatusClass(task.status)">
            {{ getStatusLabel(task.status) }}
          </span>
        </div>
        <div class="badge-item">
          <span class="badge-label">Prioridade:</span>
          <span class="badge" [ngClass]="getPriorityClass(task.priority)">
            {{ getPriorityLabel(task.priority) }}
          </span>
        </div>
      </div>

      <div class="info-section">
        <h3>DescriÃ§Ã£o</h3>
        <p class="description">{{ task.description || 'Sem descriÃ§Ã£o' }}</p>
      </div>

      <div class="info-section">
        <h3>Projeto</h3>
        <div class="project-info">
          <div class="info-item">
            <span class="info-icon">ğŸ“</span>
            <div class="info-content">
              <span class="info-label">Nome do Projeto</span>
              <span class="info-value">{{ task.project.name }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="info-section">
        <h3>ResponsÃ¡vel</h3>
        <div class="assignee-info">
          <div class="info-item">
            <span class="info-icon">ğŸ‘¤</span>
            <div class="info-content">
              <span class="info-label">Email</span>
              <span class="info-value">{{ task.assignee.email }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="info-section">
        <h3>Datas</h3>
        <div class="dates-grid">
          <div class="info-item">
            <span class="info-icon">ğŸ“…</span>
            <div class="info-content">
              <span class="info-label">Data de Vencimento</span>
              <span class="info-value">{{ task.dueDate | date: 'dd/MM/yyyy' }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div class="error-alert" *ngIf="errorMessage && !serviceUnavailable">
        {{ errorMessage }}
      </div>
    </div>
  </div>

  <!-- Not Found -->
  <div class="not-found" *ngIf="!task && !isLoading && !serviceUnavailable">
    <div class="error-icon">âŒ</div>
    <h2>Tarefa nÃ£o encontrada</h2>
    <p>A tarefa que vocÃª estÃ¡ procurando nÃ£o existe ou foi removida.</p>
    <button class="btn-back" routerLink="/tasks">
      â† Voltar para Tarefas
    </button>
  </div>
</div>
