<div class="project-detail-container">
  <div class="error-alert" *ngIf="errorMessage">
    <ng-icon name="heroExclamationCircle" size="20"></ng-icon>
    {{ errorMessage }}
  </div>

  <div class="loading" *ngIf="isLoading">
    <ng-icon name="heroArrowPath" size="32" class="spin"></ng-icon>
    <p>Carregando projeto...</p>
  </div>

  <div *ngIf="!isLoading && project" class="detail-content">
    <div class="header">
      <button class="btn-back" routerLink="/projects">
        <ng-icon name="heroArrowLeft" size="18"></ng-icon>
        Voltar para Projetos
      </button>
      <div class="header-actions">
        <button class="btn-kanban" [routerLink]="['/projects', project.id, 'kanban']">
          <ng-icon name="heroSquares2x2" size="18"></ng-icon>
          Kanban
        </button>
        <button class="btn-edit" [routerLink]="['/projects/edit', project.id]">
          <ng-icon name="heroPencilSquare" size="18"></ng-icon>
          Editar
        </button>
        <button class="btn-delete" (click)="deleteProject()">
          <ng-icon name="heroTrash" size="18"></ng-icon>
          Excluir
        </button>
      </div>
    </div>

    <div class="project-info-card">
      <h1>{{ project.name }}</h1>
      
      <div class="info-section">
        <h3>
          <ng-icon name="heroDocumentText" size="20"></ng-icon>
          Descrição
        </h3>
        <p class="description">{{ project.description || 'Sem descrição' }}</p>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <ng-icon name="heroUser" size="20"></ng-icon>
          <div class="info-content">
            <span class="info-label">Responsável:</span>
            <span class="info-value">{{ project.owner.name }}</span>
          </div>
        </div>
        
        <div class="info-item">
          <ng-icon name="heroEnvelope" size="20"></ng-icon>
          <div class="info-content">
            <span class="info-label">Email:</span>
            <span class="info-value">{{ project.owner.email }}</span>
          </div>
        </div>
        
        <div class="info-item">
          <ng-icon name="heroCalendar" size="20"></ng-icon>
          <div class="info-content">
            <span class="info-label">Data de Início:</span>
            <span class="info-value">{{ project.startDate | date: 'dd/MM/yyyy' }}</span>
          </div>
        </div>
        
        <div class="info-item">
          <ng-icon name="heroCalendar" size="20"></ng-icon>
          <div class="info-content">
            <span class="info-label">Data de Término:</span>
            <span class="info-value">{{ project.endDate | date: 'dd/MM/yyyy' }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="tasks-section">
      <div class="tasks-header">
        <h2>
          <ng-icon name="heroCheckCircle" size="24"></ng-icon>
          Tarefas do Projeto
        </h2>
        <span class="tasks-count">{{ tasks.length }} tarefa(s)</span>
      </div>

      <div class="loading" *ngIf="isLoadingTasks">
        <ng-icon name="heroArrowPath" size="32" class="spin"></ng-icon>
        <p>Carregando tarefas...</p>
      </div>

      <div class="tasks-list" *ngIf="!isLoadingTasks && tasks.length > 0">
        <div class="task-card" *ngFor="let task of tasks" clickable [routerLink]="['/tasks/', task.id]">
          <div class="task-header">
            <h3>
              <ng-icon name="heroCheckCircle" size="20"></ng-icon>
              {{ task.title }}
            </h3>
            <div class="task-badges">
              <span class="badge" [ngClass]="getStatusClass(task.status)">
                {{ getStatusLabel(task.status) }}
              </span>
              <span class="badge" [ngClass]="getPriorityClass(task.priority)">
                {{ getPriorityLabel(task.priority) }}
              </span>
            </div>
          </div>

          <p class="task-description">{{ task.description }}</p>

          <div class="task-info">
            <div class="task-info-item">
              <ng-icon name="heroUser" size="16"></ng-icon>
              <span class="task-info-label">Responsável:</span>
              <span>{{ task.assignee.name }}</span>
            </div>
            <div class="task-info-item">
              <ng-icon name="heroCalendar" size="16"></ng-icon>
              <span class="task-info-label">Prazo:</span>
              <span>{{ task.dueDate | date: 'dd/MM/yyyy' }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="!isLoadingTasks && tasks.length === 0">
        <ng-icon name="heroCheckCircle" size="48"></ng-icon>
        <p>Nenhuma tarefa cadastrada para este projeto.</p>
      </div>
    </div>
  </div>
</div>
